<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sơ đồ đường đi - Kiểm thử hộp trắng</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
        }
        
        h1,
        h2 {
            text-align: center;
        }
        
        svg {
            border: 1px solid #ccc;
            margin: 20px 0;
        }
        
        .node {
            fill: #f0f0f0;
            stroke: #333;
            stroke-width: 2;
        }
        
        .decision {
            fill: #e0e0ff;
            stroke: #0000ff;
            stroke-width: 2;
        }
        
        .edge {
            stroke: #666;
            stroke-width: 2;
        }
        
        .label {
            font-size: 12px;
            text-anchor: middle;
        }
    </style>
</head>

<body>
    <h1>Sơ đồ đường đi - Kiểm thử hộp trắng</h1>

    <h2>1. Sơ đồ đường đi của _handleLogin (LoginScreen.dart)</h2>
    <svg width="900" height="800">
        <!-- Nodes -->
        <!-- N1: Kiểm tra validation - Hình tam giác -->
        <polygon points="450,10 500,50 400,50" class="decision"/>
        <text x="450" y="25" class="label">N1: Kiểm tra username</text>
        <text x="450" y="40" class="label">hoặc password rỗng</text>

        <!-- N2: Hiển thị lỗi validation - Hình chữ nhật -->
        <rect x="400" y="100" width="150" height="40" class="node" rx="10"/>
        <text x="475" y="125" class="label">N2: Hiển thị lỗi validation</text>

        <!-- N3: Bật loading - Hình chữ nhật -->
        <rect x="400" y="190" width="150" height="40" class="node" rx="10"/>
        <text x="475" y="215" class="label">N3: Bật trạng thái loading</text>

        <!-- N4: Gọi Auth.login - Hình chữ nhật -->
        <rect x="400" y="280" width="150" height="40" class="node" rx="10"/>
        <text x="475" y="305" class="label">N4: Gọi Auth.login</text>

        <!-- N5: Tắt loading - Hình chữ nhật -->
        <rect x="400" y="370" width="150" height="40" class="node" rx="10"/>
        <text x="475" y="395" class="label">N5: Tắt trạng thái loading</text>

        <!-- N6: Kiểm tra API thành công - Hình tam giác -->
        <polygon points="450,420 500,460 400,460" class="decision"/>
        <text x="450" y="435" class="label">N6: Kiểm tra API</text>
        <text x="450" y="450" class="label">thành công</text>

        <!-- N7: Lưu token - Hình chữ nhật -->
        <rect x="550" y="470" width="150" height="40" class="node" rx="10"/>
        <text x="625" y="495" class="label">N7: Lưu token và role</text>

        <!-- N8: Kiểm tra role Admin - Hình tam giác -->
        <polygon points="600,520 650,560 550,560" class="decision"/>
        <text x="600" y="535" class="label">N8: Kiểm tra role</text>
        <text x="600" y="550" class="label">là Admin</text>

        <!-- N9: Chuyển MainScreenAdmin - Hình chữ nhật -->
        <rect x="700" y="570" width="150" height="40" class="node" rx="10"/>
        <text x="775" y="595" class="label">N9: Chuyển MainScreenAdmin</text>

        <!-- N10: Chuyển MainScreen - Hình chữ nhật -->
        <rect x="400" y="570" width="150" height="40" class="node" rx="10"/>
        <text x="475" y="595" class="label">N10: Chuyển MainScreen</text>

        <!-- N11: Hiển thị lỗi API - Hình chữ nhật -->
        <rect x="200" y="470" width="150" height="40" class="node" rx="10"/>
        <text x="275" y="495" class="label">N11: Hiển thị lỗi API</text>

        <!-- N12: Kết thúc - Hình chữ nhật -->
        <rect x="450" y="650" width="150" height="40" class="node" rx="10"/>
        <text x="525" y="675" class="label">N12: Kết thúc</text>

        <!-- Edges -->
        <line x1="450" y1="50" x2="475" y2="100" class="edge"/>
        <text x="485" y="75" class="label">True</text>

        <line x1="450" y1="50" x2="475" y2="190" class="edge"/>
        <text x="485" y="120" class="label">False</text>

        <line x1="475" y1="230" x2="475" y2="280" class="edge"/>
        <line x1="475" y1="320" x2="475" y2="370" class="edge"/>
        <line x1="475" y1="410" x2="475" y2="420" class="edge"/>

        <line x1="450" y1="460" x2="625" y2="470" class="edge"/>
        <text x="525" y="455" class="label">True</text>

        <line x1="450" y1="460" x2="275" y2="470" class="edge"/>
        <text x="375" y="455" class="label">False</text>

        <line x1="625" y1="510" x2="625" y2="520" class="edge"/>

        <line x1="600" y1="560" x2="775" y2="570" class="edge"/>
        <text x="675" y="555" class="label">True</text>

        <line x1="600" y1="560" x2="475" y2="570" class="edge"/>
        <text x="525" y="555" class="label">False</text>

        <line x1="775" y1="610" x2="525" y2="650" class="edge"/>
        <line x1="475" y1="610" x2="525" y2="650" class="edge"/>
        <line x1="275" y1="510" x2="525" y2="650" class="edge"/>
    </svg>

    <h2>2. Sơ đồ đường đi của login (AuthService.dart)</h2>
    <svg width="700" height="600">
        <!-- Nodes -->
        <!-- A1: Bắt đầu try - Hình chữ nhật -->
        <rect x="300" y="10" width="150" height="40" class="node" rx="10"/>
        <text x="375" y="35" class="label">A1: Bắt đầu try</text>

        <!-- A2: Gửi http.post - Hình chữ nhật -->
        <rect x="300" y="100" width="150" height="40" class="node" rx="10"/>
        <text x="375" y="125" class="label">A2: Gửi http.post</text>

        <!-- A3: Kiểm tra statusCode - Hình tam giác -->
        <polygon points="350,150 400,190 300,190" class="decision"/>
        <text x="350" y="165" class="label">A3: Kiểm tra</text>
        <text x="350" y="180" class="label">statusCode == 200</text>

        <!-- A4: Kiểm tra status - Hình tam giác -->
        <polygon points="500,200 550,240 450,240" class="decision"/>
        <text x="500" y="215" class="label">A4: Kiểm tra</text>
        <text x="500" y="230" class="label">status == false</text>

        <!-- A5: Trả về lỗi server - Hình chữ nhật -->
        <rect x="450" y="280" width="150" height="40" class="node" rx="10"/>
        <text x="525" y="305" class="label">A5: Trả về lỗi server</text>

        <!-- A6: Trả về thành công - Hình chữ nhật -->
        <rect x="600" y="280" width="150" height="40" class="node" rx="10"/>
        <text x="675" y="305" class="label">A6: Trả về thành công</text>

        <!-- A7: Trả về lỗi statusCode - Hình chữ nhật -->
        <rect x="150" y="280" width="150" height="40" class="node" rx="10"/>
        <text x="225" y="305" class="label">A7: Trả về lỗi statusCode</text>

        <!-- A8: Trả về lỗi mạng - Hình chữ nhật -->
        <rect x="300" y="370" width="150" height="40" class="node" rx="10"/>
        <text x="375" y="395" class="label">A8: Trả về lỗi mạng</text>

        <!-- A9: Kết thúc - Hình chữ nhật -->
        <rect x="350" y="460" width="150" height="40" class="node" rx="10"/>
        <text x="425" y="485" class="label">A9: Kết thúc</text>

        <!-- Edges -->
        <line x1="375" y1="50" x2="375" y2="100" class="edge"/>

        <line x1="375" y1="140" x2="375" y2="150" class="edge"/>
        <text x="395" y="145" class="label">Success</text>

        <line x1="375" y1="140" x2="375" y2="370" class="edge"/>
        <text x="395" y="255" class="label">Error</text>

        <line x1="350" y1="190" x2="500" y2="200" class="edge"/>
        <text x="425" y="185" class="label">True</text>

        <line x1="350" y1="190" x2="225" y2="280" class="edge"/>
        <text x="275" y="235" class="label">False</text>

        <line x1="500" y1="240" x2="525" y2="280" class="edge"/>
        <text x="545" y="260" class="label">True</text>

        <line x1="500" y1="240" x2="675" y2="280" class="edge"/>
        <text x="575" y="260" class="label">False</text>

        <line x1="675" y1="320" x2="425" y2="460" class="edge"/>
        <line x1="525" y1="320" x2="425" y2="460" class="edge"/>
        <line x1="225" y1="320" x2="425" y2="460" class="edge"/>
        <line x1="375" y1="410" x2="425" y2="460" class="edge"/>
    </svg>
</body>

</html>